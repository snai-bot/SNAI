<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>SNAI рдпреЛрдЬрдирд╛ рдкрд╛рддреНрд░рддрд╛</title>
</head>
<body>
  <h2>рд░рд╛рдЬрд╕реНрдерд╛рди рдпреЛрдЬрдирд╛ рдкрд╛рддреНрд░рддрд╛ рдлреЙрд░реНрдо</h2>

  <form id="eligibilityForm">
    рдЖрдпреБ (Age): <input type="number" name="age" required /><br/><br/>
    рдЖрдп (тВ╣): <input type="number" name="income" required /><br/><br/>
    рдЬрд╛рддрд┐ (Caste): <input type="text" name="caste" required /><br/><br/>
    рдЬрд┐рд▓рд╛ (District): <input type="text" name="district" required /><br/><br/>

    рдорд╣рд┐рд▓рд╛ рд╣реИрдВ? <input type="radio" name="gender" value="female" required> рд╣рд╛рдБ
    <input type="radio" name="gender" value="male" required> рдирд╣реАрдВ<br/><br/>

    рд╡рд┐рдзрд╡рд╛ рд╣реИрдВ? <input type="checkbox" name="is_widow"><br/><br/>
    рдХрд┐рд╕рд╛рди рд╣реИрдВ? <input type="checkbox" name="is_farmer"><br/><br/>
    рдЖрдкрдХреЗ рдкрд╛рд╕ рдХрд╛рд░ рд╣реИ? <input type="checkbox" name="asset_car"><br/><br/>

    <button type="submit">тЬЕ рдкрд╛рддреНрд░рддрд╛ рдЬрд╛рдБрдЪреЗрдВ</button>
  </form>

  <hr>
  <div id="result"></div>

  <script>
    document.getElementById("eligibilityForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const form = new FormData(this);
      const data = {
        age: parseInt(form.get("age")),
        income: parseInt(form.get("income")),
        caste: form.get("caste"),
        district: form.get("district"),
        gender: form.get("gender"),
        is_widow: form.get("is_widow") !== null,
        is_farmer: form.get("is_farmer") !== null,
        asset_car: form.get("asset_car") !== null
      };

      const res = await fetch("https://snai.onrender.com/check-eligibility", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(data)
      });

      const json = await res.json();

      let output = "<h3>ЁЯз╛ рдкрд╛рддреНрд░ рдпреЛрдЬрдирд╛рдПрдВ:</h3><ul>";
      if (json.matched_schemes.length === 0) {
        output += "<li>рдХреЛрдИ рдпреЛрдЬрдирд╛ рдирд╣реАрдВ рдорд┐рд▓реАред</li>";
      } else {
        json.matched_schemes.forEach(s => {
          output += `<li>
            <strong>${s.scheme}</strong><br/>
            ЁЯУД рджрд╕реНрддрд╛рд╡реЗрдЬрд╝: ${s.documents || 'рдЬрд╛рдирдХрд╛рд░реА рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ'}<br/>
            ЁЯФЧ <a href="${s.link}" target="_blank">рдЖрд╡реЗрджрди рд▓рд┐рдВрдХ</a>
          </li><br/>`;
        });
      }
      output += "</ul>";
      document.getElementById("result").innerHTML = output;
    });
  </script>
</body>
</html>
